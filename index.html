<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mots Crois√©s F√©lins</title>
    <style>
        :root {
            --primary: #2e7d32;
            --accent: #fbc02d;
            --cell-size: 32px;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            /* IMAGE DE FOND AVEC PETITS CHATS */
            background: linear-gradient(rgba(255,255,255,0.7), rgba(255,255,255,0.7)), 
                        url('https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px; 
            margin: 0; 
            min-height: 100vh;
        }

        h1 { 
            color: #2c3e50; 
            text-shadow: 2px 2px 4px rgba(255,255,255,0.8);
            margin-bottom: 10px; 
            font-size: 2rem; 
        }

        #grid-container { 
            background: rgba(255, 255, 255, 0.9); /* Effet translucide */
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.2); 
            display: inline-block;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .row { display: flex; margin-bottom: 4px; align-items: center; }
        
        .row-label {
            width: 25px;
            font-size: 0.75rem;
            color: #555;
            text-align: right;
            margin-right: 10px;
            font-weight: bold;
        }

        .cell { 
            width: var(--cell-size); 
            height: var(--cell-size); 
            border: 1px solid #999; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: #fff; 
            transition: all 0.2s;
            border-radius: 4px;
        }

        .empty { border: none; background: transparent !important; }

        input { 
            width: 100%; 
            height: 100%; 
            border: none; 
            text-align: center; 
            text-transform: uppercase; 
            font-weight: bold; 
            font-size: 18px; 
            outline: none; 
            background: transparent; 
            color: #2c3e50;
        }

        /* Lettre bonus pr√©-remplie */
        input.bonus {
            color: #999;
            background: #f0f0f0;
        }

        .target { 
            background: #fff9c4 !important; 
            border: 2px solid var(--accent);
            z-index: 1;
        } 

        .row-correct .cell { 
            background: #c8e6c9 !important; 
            border-color: var(--primary); 
        }
        
        .row-correct input { color: var(--primary); }

        #clue-box { 
            margin-top: 25px; 
            padding: 20px; 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 12px;
            border-left: 8px solid var(--accent); 
            width: 90%; 
            max-width: 500px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            font-size: 1.1rem; 
            min-height: 50px;
        }

        .btn-reset { 
            margin-top: 20px; 
            padding: 10px 25px; 
            background: var(--primary); 
            border: none; 
            border-radius: 20px; 
            cursor: pointer; 
            font-size: 0.9rem; 
            color: white; 
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .btn-reset:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

    <h1>üêæ Mots Crois√©s Chat-mille üêæ</h1>

    <div id="grid-container"></div>

    <div id="clue-box">S√©lectionnez une case pour commencer !</div>

    <button class="btn-reset" onclick="window.location.reload()">Nouvelle Partie</button>

<script>
    const wordsConfig = [
        { word: "DOMESTIQUE", targetIdx: 3, clue: "Un chat qui a choisi de vivre avec les humains." },
        { word: "SAUMUR",     targetIdx: 0, clue: "La ville des bords de Loire o√π nous sommes." },
        { word: "APPAT",      targetIdx: 1, clue: "Le morceau de fromage ou de lard." },
        { word: "LITIERE",    targetIdx: 0, clue: "Indispensable pour la propret√© de nos f√©lins." },
        { word: "TRAHISON",   targetIdx: 2, clue: "Le pire crime au sein d'un clan." },
        { word: "NETTOYEUR",  targetIdx: 0, clue: "Pratique ill√©gale ou personne qui efface les traces." },
        { word: "ANCETRE",    targetIdx: 0, clue: "Une personne qui a v√©cu bien avant nous." },
        { word: "DEGAT",      targetIdx: 0, clue: "Trace laiss√©e par les dents ou griffes." },
        { word: "ESTOMAC",    targetIdx: 0, clue: "Organe tr√®s extensible chez le chat." },
        { word: "",           targetIdx: 0, clue: "" }, 
        { word: "HIERARCHIE", targetIdx: 0, clue: "Structure pyramidale tr√®s stricte." },
        { word: "UNITE",      targetIdx: 0, clue: "La force du clan qui reste soud√©." },
        { word: "BOSS",       targetIdx: 0, clue: "Le chef absolu de la famille." },
        { word: "RESEAU",     targetIdx: 3, clue: "Ensemble de contacts." },
        { word: "RIVALITE",   targetIdx: 0, clue: "Tension entre deux clans." },
        { word: "TRAFIC",     targetIdx: 0, clue: "Commerce ill√©gal." },
        { word: "",           targetIdx: 0, clue: "" }, 
        { word: "LANGUE",     targetIdx: 0, clue: "Muscle Puissant." },
        { word: "AGILITE",    targetIdx: 0, clue: "Capacit√© du chat √† retomber sur ses pattes." },
        { word: "NUISIBLES",  targetIdx: 0, clue: "Parasites ou destructeurs." },
        { word: "DENTS",      targetIdx: 0, clue: "Elles poussent sans arr√™t chez la souris." },
        { word: "ANGORA",     targetIdx: 0, clue: "Chat √† poils longs et soyeux." },
        { word: "INSTINCT",   targetIdx: 0, clue: "Ce qui pousse l'animal √† agir sans r√©fl√©chir." },
        { word: "SURVIE",     targetIdx: 0, clue: "Occupation principale de la souris." }
    ];

    const container = document.getElementById('grid-container');
    const clueBox = document.getElementById('clue-box');
    const YELLOW_COL = 8; 
    let clueCounter = 1;

    wordsConfig.forEach((item, rIdx) => {
        const row = document.createElement('div');
        row.className = 'row';
        row.id = `row-${rIdx}`;
        
        if (item.word === "") {
            row.style.height = "20px"; 
            container.appendChild(row);
            return;
        }

        const label = document.createElement('div');
        label.className = 'row-label';
        label.innerText = clueCounter + ".";
        row.appendChild(label);
        const currentClue = clueCounter + ". " + item.clue;
        clueCounter++;

        const startPos = YELLOW_COL - item.targetIdx;
        
        // Choisir un index de lettre bonus au hasard pour ce mot
        const bonusLetterIdx = Math.floor(Math.random() * item.word.length);

        for (let cIdx = 0; cIdx < 18; cIdx++) {
            const cell = document.createElement('div');
            if (cIdx >= startPos && cIdx < startPos + item.word.length) {
                const charPosInWord = cIdx - startPos;
                cell.className = 'cell';
                if (cIdx === YELLOW_COL) cell.classList.add('target');
                
                const input = document.createElement('input');
                input.maxLength = 1;
                
                // Appliquer la lettre bonus
                if (charPosInWord === bonusLetterIdx) {
                    input.value = item.word[charPosInWord];
                    input.readOnly = true;
                    input.classList.add('bonus');
                }
                
                input.addEventListener('focus', () => {
                    clueBox.innerHTML = `<strong>Indice :</strong><br>${currentClue}`;
                });

                input.addEventListener('input', (e) => {
                    if (e.target.value) {
                        moveFocus(cell, 'next');
                    }
                    checkRow(rIdx, item.word);
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === "Backspace" && !input.value) {
                        moveFocus(cell, 'prev');
                    }
                });

                cell.appendChild(input);
            } else {
                cell.className = 'cell empty';
            }
            row.appendChild(cell);
        }
        container.appendChild(row);
        // V√©rifier au chargement (pour la lettre bonus)
        checkRow(rIdx, item.word);
    });

    function moveFocus(currentCell, direction) {
        let targetCell = (direction === 'next') ? currentCell.nextElementSibling : currentCell.previousElementSibling;
        
        // On saute les cellules vides ou les inputs en lecture seule (bonus)
        while (targetCell && (targetCell.classList.contains('empty') || (targetCell.querySelector('input') && targetCell.querySelector('input').readOnly))) {
            targetCell = (direction === 'next') ? targetCell.nextElementSibling : targetCell.previousElementSibling;
        }

        if (targetCell) {
            const input = targetCell.querySelector('input');
            if (input) input.focus();
        }
    }

    function checkRow(rowIndex, correctWord) {
        const row = document.getElementById(`row-${rowIndex}`);
        const inputs = row.querySelectorAll('input');
        let val = "";
        inputs.forEach(i => val += i.value.toUpperCase());
        
        if (val === correctWord.toUpperCase()) {
            row.classList.add('row-correct');
            inputs.forEach(i => i.readOnly = true);
        }
    }
</script>
</body>
</html>
