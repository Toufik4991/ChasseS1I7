<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mots Croisés Pro</title>
    <style>
        :root {
            --primary: #2e7d32;
            --accent: #fbc02d;
            --bg: #f0f2f5;
            --cell-size: 32px;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--bg); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px; 
            margin: 0; 
            color: #333;
        }

        h1 { color: var(--primary); margin-bottom: 10px; font-size: 1.5rem; }

        #grid-container { 
            background: #fff; 
            padding: 25px; 
            border-radius: 12px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            display: inline-block;
            border: 1px solid #ddd;
        }

        .row { display: flex; margin-bottom: 4px; align-items: center; }
        
        /* Numéros des indices */
        .row-label {
            width: 25px;
            font-size: 0.7rem;
            color: #999;
            text-align: right;
            margin-right: 8px;
            font-weight: bold;
        }

        .cell { 
            width: var(--cell-size); 
            height: var(--cell-size); 
            border: 1px solid #ccc; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: #fff; 
            transition: all 0.2s;
            border-radius: 4px;
            position: relative;
        }

        .empty { border: none; background: transparent !important; }

        input { 
            width: 100%; 
            height: 100%; 
            border: none; 
            text-align: center; 
            text-transform: uppercase; 
            font-weight: bold; 
            font-size: 18px; 
            outline: none; 
            background: transparent; 
            color: #2c3e50;
        }

        /* Colonne cible (jaune) */
        .target { 
            background: #fff9c4 !important; 
            border: 2px solid var(--accent);
            z-index: 1;
        } 

        /* Animation de succès */
        .row-correct .cell { 
            background: #e8f5e9 !important; 
            border-color: var(--primary); 
            transform: scale(1.02);
        }
        
        .row-correct input { color: var(--primary); }

        #clue-box { 
            margin-top: 25px; 
            padding: 20px; 
            background: #fff; 
            border-radius: 8px;
            border-left: 6px solid var(--accent); 
            width: 100%; 
            max-width: 500px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            font-size: 1.1rem; 
            line-height: 1.4;
            min-height: 40px;
            transition: all 0.3s ease;
        }

        .btn-reset { 
            margin-top: 25px; 
            padding: 10px 20px; 
            background: #fff; 
            border: 1px solid #ccc; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 0.9rem; 
            color: #666; 
            transition: all 0.2s;
        }

        .btn-reset:hover { background: #f5f5f5; border-color: #999; }
    </style>
</head>
<body>

    <h1>Mots Croisés</h1>

    <div id="grid-container"></div>

    <div id="clue-box">Cliquez sur une case pour voir l'indice.</div>

    <button class="btn-reset" onclick="window.location.reload()">Réinitialiser la grille</button>

<script>
    const wordsConfig = [
        { word: "DOMESTIQUE", targetIdx: 3, clue: "Un chat qui a choisi de vivre avec les humains." },
        { word: "SAUMUR",     targetIdx: 0, clue: "La ville des bords de Loire où nous sommes." },
        { word: "APPAT",      targetIdx: 1, clue: "Le morceau de fromage ou de lard." },
        { word: "LITIERE",    targetIdx: 0, clue: "Indispensable pour la propreté de nos félins." },
        { word: "TRAHISON",   targetIdx: 2, clue: "Le pire crime au sein d'un clan." },
        { word: "NETTOYEUR",  targetIdx: 0, clue: "Pratique illégale ou personne qui efface les traces." },
        { word: "ANCETRE",    targetIdx: 0, clue: "Une personne qui a vécu bien avant nous." },
        { word: "DEGAT",      targetIdx: 0, clue: "Trace laissée par les dents ou griffes." },
        { word: "ESTOMAC",    targetIdx: 0, clue: "Organe très extensible chez le chat." },
        { word: "",           targetIdx: 0, clue: "" }, 
        { word: "HIERARCHIE", targetIdx: 0, clue: "Structure pyramidale très stricte." },
        { word: "UNITE",      targetIdx: 0, clue: "La force du clan qui reste soudé." },
        { word: "BOSS",       targetIdx: 0, clue: "Le chef absolu de la famille." },
        { word: "RESEAU",     targetIdx: 3, clue: "Ensemble de contacts." },
        { word: "RIVALITE",   targetIdx: 0, clue: "Tension entre deux clans." },
        { word: "TRAFIC",     targetIdx: 0, clue: "Commerce illégal." },
        { word: "",           targetIdx: 0, clue: "" }, 
        { word: "LANGUE",     targetIdx: 0, clue: "Muscle Puissant." },
        { word: "AGILITE",    targetIdx: 0, clue: "Capacité du chat à retomber sur ses pattes." },
        { word: "NUISIBLES",  targetIdx: 0, clue: "Parasites ou destructeurs." },
        { word: "DENTS",      targetIdx: 0, clue: "Elles poussent sans arrêt chez la souris." },
        { word: "ANGORA",     targetIdx: 0, clue: "Chat à poils longs et soyeux." },
        { word: "INSTINCT",   targetIdx: 0, clue: "Ce qui pousse l'animal à agir sans réfléchir." },
        { word: "SURVIE",     targetIdx: 0, clue: "Occupation principale de la souris." }
    ];

    const container = document.getElementById('grid-container');
    const clueBox = document.getElementById('clue-box');
    const YELLOW_COL = 8; 
    let clueCounter = 1;

    wordsConfig.forEach((item, rIdx) => {
        const row = document.createElement('div');
        row.className = 'row';
        row.id = `row-${rIdx}`;
        
        // Espacement pour les lignes vides
        if (item.word === "") {
            row.style.height = "20px"; 
            container.appendChild(row);
            return;
        }

        // Ajout du numéro de l'indice
        const label = document.createElement('div');
        label.className = 'row-label';
        label.innerText = clueCounter + ".";
        row.appendChild(label);
        const currentClue = clueCounter + ". " + item.clue;
        clueCounter++;

        const startPos = YELLOW_COL - item.targetIdx;

        for (let cIdx = 0; cIdx < 18; cIdx++) {
            const cell = document.createElement('div');
            if (cIdx >= startPos && cIdx < startPos + item.word.length) {
                cell.className = 'cell';
                if (cIdx === YELLOW_COL) cell.classList.add('target');
                
                const input = document.createElement('input');
                input.maxLength = 1;
                
                // Focus: affiche l'indice
                input.addEventListener('focus', () => {
                    clueBox.innerHTML = `<strong>Indice :</strong><br>${currentClue}`;
                });

                // Saisie: passe au suivant
                input.addEventListener('input', (e) => {
                    if (e.target.value) {
                        const next = cell.nextElementSibling?.querySelector('input');
                        if (next) {
                            next.focus();
                        } else {
                            // Si fin de mot, essayer d'aller à la ligne suivante
                            focusNextRow(rIdx);
                        }
                    }
                    checkRow(rIdx, item.word);
                });

                // Backspace: revient en arrière
                input.addEventListener('keydown', (e) => {
                    if (e.key === "Backspace" && !input.value) {
                        const prev = cell.previousElementSibling?.querySelector('input');
                        if (prev) prev.focus();
                    }
                });

                cell.appendChild(input);
            } else {
                cell.className = 'cell empty';
            }
            row.appendChild(cell);
        }
        container.appendChild(row);
    });

    function focusNextRow(currentRowIdx) {
        const nextRow = document.getElementById(`row-${currentRowIdx + 1}`);
        if (nextRow) {
            const firstInput = nextRow.querySelector('input');
            if (firstInput) firstInput.focus();
        }
    }

    function checkRow(rowIndex, correctWord) {
        const row = document.getElementById(`row-${rowIndex}`);
        const inputs = row.querySelectorAll('input');
        let val = "";
        inputs.forEach(i => val += i.value.toUpperCase());
        
        if (val === correctWord.toUpperCase()) {
            row.classList.add('row-correct');
            inputs.forEach(i => i.readOnly = true);
        } else {
            row.classList.remove('row-correct');
        }
    }
</script>
</body>
</html>
